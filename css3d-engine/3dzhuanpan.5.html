<!DOCTYPE html>
<html lang="en">
<head>
    <!--适配-->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,minimum-scale=1,user-scalable=no,maximum-scale=1,initial-scale=1">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">  
	<meta http-equiv="x-rim-auto-match" content="none">  
    <!--适配-->
    <!--通用-->
    <style>
            *,
        ::before,
        ::after {
        padding: 0;
        margin: 0;
        -webkit-tap-highlight-color: transparent;
        -webkit-box-sizing: border-box;
        box-sizing: border-box; }
        html,body {
            width: 100%;
            height: 100%;
        }
        #main {
            width: 100%;
            height: 100%;
            background: url("./images/bg.jpg") no-repeat;
            background-size: 100% 100%;
        }
        .redmask {
            height: 100%;
            position: absolute;
            top: 0;
            right: 0;
            width: 0.2rem;
            background: #aa0117;
        }
        .redmask-L {
            height: 100%;
            width: 0.2rem;
            background: #aa0117;
        }
        
    </style>
    <!--通用-->
    <title>css3d-engine</title>
</head>
<body>
    <div id="main"></div>
    <!--=========-->
    <!--js begine-->
    <!--=========-->
    <script src="./js/jquery.js"></script>
    <script src="./js/css3d.js"></script>
    <script src="./js/jstween.min.js"></script>
    <script src="./js/hammer.min.js"></script>
    <script>
        // @e-mail：tumi330@163.com
        // 适配：640的设计稿，320的屏
        ;(function (doc, win) {
            var docEl = doc.documentElement,
            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                    recalc = function () {
                var clientWidth = docEl.clientWidth;
                if (!clientWidth) return;
                if(clientWidth > 800) clientWidth=800;
                docEl.style.fontSize = 20 * (clientWidth / 320) + 'px';
            };
            
            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            recalc();
        })(document, window);

        ;(function(){
            // 上下文(type:1/中奖 2/没中奖 3/有图的空白框 4/没图的空白框)
            var content = [
                {
                    "id":1,
                    "type":1,
                    "frameUrl":"./images/dazhuanpan/get-1.png",
                    "textUrl":"./images/dazhuanpan/get-text1.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)",
                    "giftUrl":"./images/dazhuanpan/gift-1.png"
                },
                {
                    "id":2,
                    "type":1,
                    "frameUrl":"./images/dazhuanpan/get-2.png",
                    "textUrl":"./images/dazhuanpan/get-text2.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)",
                    "giftUrl":"./images/dazhuanpan/gift-1.png"
                },
                {
                    "id":3,
                    "type":1,
                    "frameUrl":"./images/dazhuanpan/get-3.png",
                    "textUrl":"./images/dazhuanpan/get-text3.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)",
                    "giftUrl":"./images/dazhuanpan/gift-1.png"
                },
                {
                    "id":4,
                    "type":1,
                    "frameUrl":"./images/dazhuanpan/get-4.png",
                    "textUrl":"./images/dazhuanpan/get-text4.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)",
                    "giftUrl":"./images/dazhuanpan/gift-1.png"
                },
                {
                    "id":5,
                    "type":1,
                    "frameUrl":"./images/dazhuanpan/get-5.png",
                    "textUrl":"./images/dazhuanpan/get-text5.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)",
                    "giftUrl":"./images/dazhuanpan/gift-2.png"
                },
                {
                    "id":6,
                    "type":2,
                    "frameUrl":"./images/dazhuanpan/noGet-1.png",
                    "textUrl":"./images/dazhuanpan/noGet-text1.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)"
                },
                {
                    "id":7,
                    "type":2,
                    "frameUrl":"./images/dazhuanpan/noGet-2.png",
                    "textUrl":"./images/dazhuanpan/noGet-text2.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)"
                },
                {
                    "id":8,
                    "type":2,
                    "frameUrl":"./images/dazhuanpan/noGet-3.png",
                    "textUrl":"./images/dazhuanpan/noGet-text3.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)"
                },
                {
                    "id":9,
                    "type":2,
                    "frameUrl":"./images/dazhuanpan/noGet-4.png",
                    "textUrl":"./images/dazhuanpan/noGet-text4.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)"
                },
                {
                    "id":10,
                    "type":2,
                    "frameUrl":"./images/dazhuanpan/noGet-5.png",
                    "textUrl":"./images/dazhuanpan/noGet-text5.png",
                    "text":"(Apple iPhone 7 (A1660) 32G 金色移动联通电信4G手机)"
                },
                {
                    "id":11,
                    "type":3,
                    "frameUrl":"./images/dazhuanpan/noEmpty-1.png",
                    "textUrl":"",
                    "text":""
                },
                {
                    "id":12,
                    "type":3,
                    "frameUrl":"./images/dazhuanpan/noEmpty-2.png",
                    "textUrl":"",
                    "text":""
                },
                {
                    "id":13,
                    "type":3,
                    "frameUrl":"./images/dazhuanpan/noEmpty-3.png",
                    "textUrl":"",
                    "text":""
                },
                {
                    "id":14,
                    "type":3,
                    "frameUrl":"./images/dazhuanpan/noEmpty-4.png",
                    "textUrl":"",
                    "text":""
                },
                {
                    "id":15,
                    "type":4,
                    "frameUrl":"./images/dazhuanpan/empty-1.png",
                    "textUrl":"",
                    "text":""
                },
                {
                    "id":16,
                    "type":4,
                    "frameUrl":"./images/dazhuanpan/empty-2.png",
                    "textUrl":"",
                    "text":""
                },
            ];
            // 中奖的8个页面
            var getArr = [];
            var noGetArr = [];
            var noEmptyArr = [];
            var emptyArr = [];
            for (var i=0 ; i<content.length ; i++) {
                if(content[i].type == 1){
                    getArr.push(content[i]);
                }else if(content[i].type == 2) {
                    noGetArr.push(content[i]);
                }else if(content[i].type == 3){
                    noEmptyArr.push(content[i]);
                }else {
                    emptyArr.push(content[i]);
                }
            }
            // TODO 分奖项级别 拿到奖项名字 给页面赋值
            // var awardText = ["12313","123","21124"];
            // for(var i=0 ; i<getArr.length ; i++){
            //     getArr[i] = awardText[Math.floor(3*Math.random)];
            // }
            // 全局配置
            var G = {
                // 奖项
                "award":{
                    "num":3
                },
                "planes":[],
                "Sprites1":[],
                "Sprites2":[],
                "Sprites3":[],
            };
            // 页面构建
            // getArr[0].frameUrl
            var planeData = [
                {'id':1,
                 'angle':30,
                 'bgUrl':getArr[0].frameUrl,
                 'textUrl':getArr[0].textUrl,
                 'text':getArr[0].text
                },
                {'id':2,
                 'angle':60,
                 'bgUrl':getArr[1].frameUrl,
                 'textUrl':getArr[1].textUrl,
                 'text':getArr[1].text
                },
                {'id':3,
                 'angle':120,
                 'bgUrl':getArr[2].frameUrl,
                 'textUrl':getArr[2].textUrl,
                 'text':getArr[2].text
                },
                {'id':4,
                 'angle':150,
                 'bgUrl':getArr[3].frameUrl,
                 'textUrl':getArr[3].textUrl,
                 'text':getArr[3].text
                },
                {'id':5,
                 'angle':210,
                 'bgUrl':getArr[4].frameUrl,
                 'textUrl':getArr[4].textUrl,
                 'text':getArr[4].text
                },
                {'id':6,
                 'angle':240,
                 'bgUrl':getArr[0].frameUrl,
                 'textUrl':getArr[0].textUrl,
                 'text':getArr[0].text
                },
                {'id':7,
                 'angle':300,
                 'bgUrl':getArr[1].frameUrl,
                 'textUrl':getArr[1].textUrl,
                 'text':getArr[1].text
                },
                {'id':8,
                 'angle':330,
                 'bgUrl':getArr[2].frameUrl,
                 'textUrl':getArr[2].textUrl,
                 'text':getArr[2].text
                },
                {'id':9,
                 'angle':0,
                 'bgUrl':noGetArr[0].frameUrl,
                 'textUrl':noGetArr[0].textUrl,
                 'text':""
                },
                {'id':10,
                 'angle':90,
                 'bgUrl':noGetArr[1].frameUrl,
                 'textUrl':noGetArr[1].textUrl,
                 'text':""
                },
                {'id':11,
                 'angle':180,
                 'bgUrl':noGetArr[2].frameUrl,
                 'textUrl':noGetArr[2].textUrl,
                 'text':""
                },
                {'id':12,
                 'angle':270,
                 'bgUrl':noGetArr[3].frameUrl,
                 'textUrl':noGetArr[3].textUrl,
                 'text':""
                },
                {'id':13,
                 'angle':10,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':14,
                 'angle':20,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':15,
                 'angle':40,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':16,
                 'angle':50,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':17,
                 'angle':70,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':18,
                 'angle':80,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':19,
                 'angle':100,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':20,
                 'angle':110,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':21,
                 'angle':130,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':22,
                 'angle':140,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':23,
                 'angle':160,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':24,
                 'angle':170,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':25,
                 'angle':190,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':26,
                 'angle':200,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                 {'id':27,
                 'angle':220,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':28,
                 'angle':230,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':29,
                 'angle':250,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':30,
                 'angle':260,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':31,
                 'angle':280,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':32,
                 'angle':290,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':33,
                 'angle':310,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':34,
                 'angle':320,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':35,
                 'angle':340,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':36,
                 'angle':350,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
            ];
            var planeData1 = [
                {'id':1,
                 'angle':10,
                 'bgUrl':getArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':2,
                 'angle':20,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':3,
                 'angle':30,
                 'bgUrl':noEmptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':4,
                 'angle':40,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':5,
                 'angle':50,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':6,
                 'angle':60,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':7,
                 'angle':70,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':8,
                 'angle':80,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':9,
                 'angle':90,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':10,
                 'angle':100,
                 'bgUrl':getArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':11,
                 'angle':110,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':12,
                 'angle':120,
                 'bgUrl':noEmptyArr[3].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':13,
                 'angle':130,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':14,
                 'angle':140,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':15,
                 'angle':150,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':16,
                 'angle':160,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':17,
                 'angle':170,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':18,
                 'angle':180,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':19,
                 'angle':190,
                 'bgUrl':getArr[2].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':20,
                 'angle':200,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':21,
                 'angle':210,
                 'bgUrl':noEmptyArr[2].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':22,
                 'angle':220,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':23,
                 'angle':230,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':24,
                 'angle':240,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':25,
                 'angle':250,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':26,
                 'angle':260,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':27,
                 'angle':270,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':28,
                 'angle':280,
                 'bgUrl':getArr[3].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':29,
                 'angle':290,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':30,
                 'angle':300,
                 'bgUrl':noEmptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':31,
                 'angle':310,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':32,
                 'angle':320,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':33,
                 'angle':330,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':34,
                 'angle':340,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':35,
                 'angle':350,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':36,
                 'angle':360,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
            ];
            var planeData2 = [
                {'id':1,
                 'angle':10,
                 'bgUrl':noGetArr[2].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':2,
                 'angle':20,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':3,
                 'angle':30,
                 'bgUrl':noEmptyArr[3].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':4,
                 'angle':40,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':5,
                 'angle':50,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':6,
                 'angle':60,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':7,
                 'angle':70,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':8,
                 'angle':80,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':9,
                 'angle':90,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':10,
                 'angle':100,
                 'bgUrl':noGetArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':11,
                 'angle':110,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':12,
                 'angle':120,
                 'bgUrl':noEmptyArr[2].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':13,
                 'angle':130,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':14,
                 'angle':140,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':15,
                 'angle':150,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':16,
                 'angle':160,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':17,
                 'angle':170,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':18,
                 'angle':180,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':19,
                 'angle':190,
                 'bgUrl':noGetArr[3].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':20,
                 'angle':200,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':21,
                 'angle':210,
                 'bgUrl':noEmptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':22,
                 'angle':220,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':23,
                 'angle':230,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':24,
                 'angle':240,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':25,
                 'angle':250,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':26,
                 'angle':260,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':27,
                 'angle':270,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':28,
                 'angle':280,
                 'bgUrl':getArr[4].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':29,
                 'angle':290,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':30,
                 'angle':300,
                 'bgUrl':noEmptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':31,
                 'angle':310,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':32,
                 'angle':320,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':33,
                 'angle':330,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':34,
                 'angle':340,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':35,
                 'angle':350,
                 'bgUrl':emptyArr[0].frameUrl,
                 'textUrl':"",
                 'text':""
                },
                {'id':36,
                 'angle':360,
                 'bgUrl':emptyArr[1].frameUrl,
                 'textUrl':"",
                 'text':""
                },
            ];

            // 素材
            var bgData = [
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test2.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
                {url: 'images/test.png'},
            ];
            // 上下文
            var content = {
                
            };
            // 缓存
            var cache = {
                set: function(key, value) {
                    var current = this.get() || {};
                    current[key] = value;
                    G.store.push(current);
                },
                get: function(key) {
                    for(var i=0;i<G.store.length;i++){
                        for(var key_i in G.store[i]){
                            if(key_i == key){
                                return G.store[i][key];
                            }
                        }
                    }
                }
            };
            // 运用css3dengine的示例
            // 创建场景
            // 所有的函数都能够链式调用
            // 一般在创建元素的时候都要调用update() 
            // 分别会执行updateS(),updateM(),updateT(),updateV()
            var sence = new C3D.Stage();
            sence.camera.position(10*window.innerWidth/32,5*window.innerWidth/32,-7*window.innerWidth/32).rotation(0,23,0);
            sence.camera.fov = 75;
            sence.size(window.innerWidth,window.innerHeight).material(
                {
                    image:"./images/dazhuanpan/bg.png",
                    size:"100% 100%"
                }
            ).update();
            // 最后将stage的dom元素置入到所需位置
            // el是所有元素的三维属性，包含对应的dom元素
            document.getElementById('main').appendChild(sence.el);
            // 创建一个三维容器，容器没有高宽深和材质信息，只有位置，旋转，缩放等信息
            
            // var c = new C3D.Skybox();
            // c.size(5*window.innerWidth).position(0, 0, 0).material({
            //     front: {image: "images/cube_FR.jpg",size:"100% 100%"},
            //     back: {image: "images/cube_BK.jpg",size:"100% 100%"},
            //     left: {image: "images/cube_LF.jpg",size:"100% 100%"},
            //     right: {image: "images/cube_RT.jpg",size:"100% 100%"},
            //     up: {image: "images/cube_UP.jpg",size:"100% 100%"},
            //     down: {image: "images/cube_DN.jpg",size:"100% 100%"},
                
            // }).update();
            // sence.addChild(c);
            

            
            //循环创建第一组平面
            function createPlane(imgs) {
                var _len = imgs.length;

                for( i=0 ; i<_len ; i++){
                    var _p = new C3D.Plane();
                    var _sp = new C3D.Sprite();
                    _p.size(window.innerWidth,window.innerHeight).rotation(0,imgs[i].angle,0).origin(window.innerWidth,window.innerWidth/2,0).position(window.innerWidth/2,-37*window.innerWidth/96,-sence.fov).material({
                        image:imgs[i].bgUrl,
                        size:"80% 100%",
                        position:"left bottom",
                        repeat:"no-repeat"
                    }).update();
                    _p.property={
                        "id": i,
                        "name": imgs[i].bgUrl
                    };
                    G.planes.push(_p);
                    _sp.addChild(_p);
                    G.Sprites1.push(_sp);
                   
                    // (function(i,_p){
                    //      JT.fromTo(_p, 30, {rotationY: imgs[i].angle}, {  
                    //         rotationY: 360+imgs[i].angle, ease: JT.Linear.In, onUpdate: function () {  
                    //             // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
                    //             _p.updateT();  
                    //         },onEnd:function(){  
                    //             _sp.removeChild(this);  
                    //         }  
                    //     });  
                    // })(i,_p);
                }
                return G.Sprites1;
            }
            var Sprites1 = createPlane(planeData1);
           
            for(var i=0; i<Sprites1.length; i++){
                sence.addChild(Sprites1[i]);
            }

            //循环创建第二组平面
            function createPlane2(imgs) {
                var _len = imgs.length;

                for( i=0 ; i<_len ; i++){
                    var _p = new C3D.Plane();
                    var _sp = new C3D.Sprite();
                    _p.size(window.innerWidth,window.innerHeight).rotation(0,imgs[i].angle,0).origin(window.innerWidth,window.innerWidth/2,0).position(window.innerWidth/2,-37*window.innerWidth/96,-sence.fov).material({
                        image:imgs[i].bgUrl,
                        size:"80% 100%",
                        position:"left bottom",
                        repeat:"no-repeat"
                    }).update();
                    _p.property={
                        "id": i,
                        "name": imgs[i].bgUrl
                    };
                    G.planes.push(_p);
                    _sp.addChild(_p);
                    G.Sprites2.push(_sp);
                   
                    // (function(i,_p){
                    //      JT.fromTo(_p, 30, {rotationY: imgs[i].angle}, {  
                    //         rotationY: 360+imgs[i].angle, ease: JT.Linear.In, onUpdate: function () {  
                    //             // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
                    //             _p.updateT();  
                    //         },onEnd:function(){  
                    //             _sp.removeChild(this);  
                    //         }  
                    //     });  
                    // })(i,_p);
                }
                return G.Sprites2;
            }
            var Sprites2 = createPlane2(planeData2);
           
            for(var i=0; i<Sprites2.length; i++){
                sence.addChild(Sprites2[i]);
            }

            // 隐藏第一组平面
            for(var i=0 ; i<Sprites1.length ; i++){
                Sprites1[i].visibility({visible:false,alpha:0}).update();
            }



            // var i=0;
            // // 动态创建平面
            // function goCreatePlane() {
            //     // 单对象缓存
            //     var cookie;
            //     // 

            //     // 创建单个平面
            //     var _p = new C3D.Plane();
            //     var _sp = new C3D.Sprite();
            //     try{
            //          _p.size(window.innerWidth,window.innerHeight).rotation(0,0,0).origin(window.innerWidth,window.innerWidth/2,0).position(window.innerWidth/2,-37*window.innerWidth/96,-sence.fov).material({
            //             image:planeData[i].bgUrl,
            //             size:"100% 90%",
            //             position:"right bottom",
            //             repeat:"no-repeat"
            //         }).update();
            //     }catch(e){
            //         console.log(i);
            //     }
               
            //     _p.property={
            //         "id": i,
            //         "name": planeData[i].bgUrl
            //     };
            //     G.planes.push(_p);
            //     _sp.addChild(_p);
            //     cache.set(_sp);
            //     G.Sprites.push(_sp);
            //     sence.addChild(_sp);
            //     // var Sprites = createPlane(planeData);
            //     // for(var i=0; i<Sprites.length; i++){
            //     //     sence.addChild(Sprites[i]);
            //     // }
            //     (function(i,_p){
            //              JT.fromTo(_p, 30, {rotationY: 0}, {  
            //                 rotationY: 360, ease: JT.Linear.In, onUpdate: function () {  
            //                     // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
            //                     _p.updateT();  
            //                 },onEnd:function(){  
            //                     _sp.removeChild(this);  
            //                 }  
            //             });  
            //         })(i,_p);
            //     i<(planeData.length-1)? i++ : i=0;
            //     requestAnimationFrame(goCreatePlane);
            // }

            // requestAnimationFrame(goCreatePlane);
            

            
            
            
            
            
            var myElement = document.getElementById('main');
           
            // by hammer.js
            var mc = new Hammer(myElement);

            // listen to events...
            // 【swipeleft】
            mc.on("swipeleft",function(){
               for(var i=0; i<G.planes.length; i++){
                   (function(Plane){
                        JT.fromTo(Plane, 15, {rotationY:Plane.rotationY}, {  
                            rotationY: -360+Plane.rotationY, ease: JT.Linear.In, onUpdate: function () {  
                                // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
                                Plane.updateT();  
                            },onEnd:function(){  
                                // _sp.removeChild(this);  
                            }  
                        });  
                   })(G.planes[i]);
               }
            });
            // 【swiperight】
            mc.on("swiperight",function(){
               for(var i=0; i<G.planes.length; i++){
                   (function(Plane){
                        JT.fromTo(Plane, 10, {rotationY:Plane.rotationY}, {  
                            rotationY: 360+Plane.rotationY, ease: JT.Linear.In, onUpdate: function () {  
                                // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
                                Plane.updateT();  
                            },onEnd:function(){  
                                // _sp.removeChild(this);  
                            }  
                        });  
                   })(G.planes[i]);
               }
            });

            // 【planes操作】
            for(var i=0; i<G.planes.length; i++){
                // $(content.planes[i].el).append(html);
                console.log($(G.planes[i]));
            }

            // 监视plane的旋转角度
            function go() {

                for(var i=0 ; i<G.planes.length ; i++){
                    if( G.planes[i].rotationY%360>=0 && G.planes[i].rotationY%360<50){

                        // content.Sprites[i].visibility({visible:false,alpha:0}).update(); 

                        // sence.camera.position(-window.innerWidth/8,-2*window.innerWidth/32,-20*window.innerWidth/32).rotation(0,-23,0).update();

                        // content.planes[i].material({
                        //     size:"110% 100%",
                        //     position:"right bottom",
                        //     repeat:"no-repeat"
                        // }).update();  

                        // (function(Plane){
                        //         JT.fromTo(Plane, 30, {width :Plane.width }, {  
                        //             width : 1.1*Plane.width, ease: JT.Linear.In, onUpdate: function () {  
                        //                 // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
                        //                 Plane.updateT();  
                        //             },onEnd:function(){  
                        //                 content.planes[i].material({
                        //                     size:"110% 100%",
                        //                     position:"right bottom",
                        //                     repeat:"no-repeat"
                        //                 }).update(); 
                        //             }  
                        //         });  
                        // })(content.planes[i]);


                        // },15);
                        // var a;
                        // setInterval(function(){
                        //      content.planes[i].material({
                        //         size:"110% 100%",
                        //         position:"right bottom",
                        //         repeat:"no-repeat"
                        //     }).update();  
                        // },15);
                        
                        // console.log(content.planes[i]);
                        
                        // content.planes[i].size((10*window.innerWidth),window.innerHeight).update();    
                    }else {
                        // content.Sprites[i].visibility({visible:true,alpha:1}).update();

                        // sence.camera.position(-window.innerWidth/3,-2*window.innerWidth/32,-12*window.innerWidth/32).rotation(0,-23,0).update();

                        // content.planes[i].material({
                        //     size:"90% 100%",
                        //     position:"right bottom",
                        //     repeat:"no-repeat"
                        // }).update();  
                    }
                }

                requestAnimationFrame(go);
            }

            requestAnimationFrame(go);
            
            // 相机位置移动
            // function go() {
            //     // var a = 360/30;
            //     // sence.camera.position(Math.cos(a)*window.innerWidth/2,-2*window.innerWidth/32,Math.sin(a)*window.innerWidth/2).rotation(0,(180-a),0).update();
            //     sence.camera.rotate(0, 0.001, 0).updateT();
            //     requestAnimationFrame(go);
            // }

            // requestAnimationFrame(go);

            // 创建一个平面放入场景
            // var p = new C3D.Plane();
            // p.size(window.innerWidth,1.1*window.innerHeight).rotation(0,-30,0).origin(window.innerWidth,window.innerWidth/2,0).position(window.innerWidth/2,-37*window.innerWidth/96,-sence.fov).material({
            //     image:"./images/1.png",
            //     size:"100% 100%",
            //     position:"top top",
            //     color:"#ccccff"
            // }).update();
            // var p2 = new C3D.Plane();
            // p2.size(window.innerWidth,1.1*window.innerHeight).rotation(0,-15,0).origin(window.innerWidth,window.innerWidth/2,0).position(window.innerWidth/2,-37*window.innerWidth/96,-sence.fov).material({
            //     image:"./images/1.png",
            //     size:"100% 100%",
            //     position:"top top"
            // }).update();
            // var p3 = new C3D.Plane();
            // p3.size(window.innerWidth,1.1*window.innerHeight).rotation(0,0,0).origin(window.innerWidth,window.innerWidth/2,0).position(window.innerWidth/2,-37*window.innerWidth/96,-sence.fov).material({
            //     image:"./images/1.png",
            //     size:"100% 100%",
            //     position:"top top"
            // }).update();
            // var p4 = new C3D.Plane();
            // p4.size(window.innerWidth,1.1*window.innerHeight).rotation(0,15,0).origin(window.innerWidth,window.innerWidth/2,0).position(window.innerWidth/2,-37*window.innerWidth/96,-sence.fov).rotation(0,0,0).material({
            //     image:"./images/1.png",
            //     size:"100% 100%",
            //     position:"top top"
            // }).update();
            // var p5 = new C3D.Plane();
            // p4.size(window.innerWidth,1.1*window.innerHeight).rotation(0,30,0).origin(window.innerWidth,window.innerWidth/2,0).position(window.innerWidth/2,-37*window.innerWidth/96,-sence.fov).rotation(0,0,0).material({
            //     image:"./images/1.png",
            //     size:"100% 100%",
            //     position:"top top"
            // }).update();
            // 创建一个立方体放入场景
            // var c = new C3D.Box();
            // c.size(100).position(0,100,-sence.fov).rotation(0,0,0).material(
            //     {
            //         color:C3D.getRandomColor()
            //     }
            // ).update();
            // 添加到场景里面
            // sence.addChild(sp);
            // sence.addChild(p);
            // sence.addChild(p2);
            // sence.addChild(p3);
            // sence.addChild(p4);
            // sence.addChild(p5);
            // sence.addChild(c);

            // 如果希望单独控制立方体各面的素材
            // positon(0,0,-sence.fov)是页面中心
            // var c2 = new C3D.Box();
            // c2.size(100).position(0, -100, -sence.fov).rotation(100, 100, 50).material({  
            //     front : {color:C3D.getRandomColor()},  
            //     back : {color:C3D.getRandomColor()},  
            //     left : {color:C3D.getRandomColor()},  
            //     right : {color:C3D.getRandomColor()},  
            //     up : {color:C3D.getRandomColor()},  
            //     down : {color:C3D.getRandomColor()},  
            // }).update();  
            // sence.addChild(c2);  

            // JT.fromTo(p, 10, {rotationY: -60}, {  
            //     rotationY: 330, ease: JT.Linear.In, onUpdate: function () {  
            //         // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
            //         p.updateT();  
            //     },onEnd:function(){  
            //         sp.removeChild(this);  
            //     }  
            // });  
            // JT.fromTo(p2, 10, {rotationY: -30}, {  
            //     rotationY: 360, ease: JT.Linear.In, onUpdate: function () {  
            //         // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
            //         p2.updateT();  
            //     },onEnd:function(){  
            //         sp.removeChild(this);  
            //     }  
            // });  
            // JT.fromTo(p3, 10, {rotationY: 0}, {  
            //     rotationY: 390, ease: JT.Linear.In, onUpdate: function () {  
            //         // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
            //         p3.updateT();  
            //     },onEnd:function(){  
            //         sp.removeChild(this);  
            //     }  
            // });  
            // JT.fromTo(p4, 10, {rotationY: 30}, {  
            //     rotationY: 420, ease: JT.Linear.In, onUpdate: function () {  
            //         // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
            //         p4.updateT();  
            //     },onEnd:function(){  
            //         sp.removeChild(this);  
            //     }  
            // });  
            // JT.fromTo(p5, 10, {rotationY: 60}, {  
            //     rotationY: 450, ease: JT.Linear.In, onUpdate: function () {  
            //         // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
            //         p5.updateT();  
            //     },onEnd:function(){  
            //         sp.removeChild(this);  
            //     }  
            // });
            // JT.fromTo(sence.camera, 5, {z: 1000}, {  
            //     z: 0, ease: JT.Quart.In, onUpdate: function () {  
            //         // 此处因为是rotationY变化,只需要调用updateT()就可以,如果是alpha活visible变化,需要调用updateV(),材质变化调用updateM(),尺寸变化调用updateS()  
            //         p5.updateT();  
            //     },onEnd:function(){  
            //         sp.removeChild(this);  
            //     }  
            // });    
            //响应屏幕调整尺寸
            function resize() {
                sence.size(window.innerWidth, window.innerHeight).update();
            }

            window.onresize = function () {
                resize();
            };
            resize();
        })(document, window);
    </script>
</body>
</html>
